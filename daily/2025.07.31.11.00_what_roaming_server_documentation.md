# Roaming Server説明書

## 概要

ローミングサーバーは、ユーザーがホームネットワーク外でネットワークリソースにアクセスすることを可能にしながら、安全な認証を維持するネットワークインフラストラクチャのコンポーネントです。主にRADIUS（Remote Authentication Dial-In User Service）プロトコルを使用して実装されます。

## 主な機能と目的

### 基本概念
- **認証フェデレーション**: 複数の組織やネットワークにまたがって、単一の認証情報でアクセスを可能にするシステム
- **シームレスアクセス**: ユーザーが異なるネットワーク間を移動しても、再認証なしで接続を維持
- **集中管理**: 認証、認可、アカウンティング（AAA）の一元管理

## 技術的アーキテクチャ

### 1. RADIUSインフラストラクチャ

RADIUSは以下の3つの主要機能を提供します：
- **認証（Authentication）**: ユーザーの身元確認
- **認可（Authorization）**: アクセス権限の付与
- **アカウンティング（Accounting）**: 使用状況の記録

### 2. 主要コンポーネント

#### ネットワークアクセスサーバー（NAS）
- ユーザーデバイスとRADIUSサーバー間の仲介役
- アクセス要求をRADIUSプロトコルに変換

#### RADIUSサーバー
- 認証要求を処理
- ユーザー情報とポリシーを管理
- プロキシチェーンを通じて他のRADIUSサーバーと連携

#### 認証方式
- **EAP（Extensible Authentication Protocol）**: 柔軟な認証フレームワーク
- **IEEE 802.1X**: ポートベースのネットワークアクセス制御

### 3. 認証プロセスの流れ

1. **初期要求**
   - ユーザーデバイスがNASにアクセス要求を送信
   - NASがRADIUS Access RequestメッセージをRADIUSサーバーに送信

2. **EAP認証ダイアログ**
   - アクセスポイント（AP）がEAPOLを使用してステーション（STA）にIDを要求
   - STAがAPに身元情報を送信
   - APがEAP経由で認証サーバー（AS）にSTA IDを転送
   - ASとSTA間でEAP認証ダイアログを実行

3. **セキュアトンネリング**
   - TLSトンネルを作成してユーザー認証情報を安全に送信
   - サプリカントと認証サーバー間の直接的な論理接続を確立

## 主要な実装例

### 1. eduroam（education roaming）

教育機関向けのグローバルローミングサービス：
- 世界中の教育機関で相互接続を実現
- RADIUSベースの信頼ファブリックを使用
- 共有シークレットによるRADIUSピア間の信頼関係

### 2. OpenRoaming

商用および公共Wi-Fiネットワークのフェデレーション：
- 自動接続機能により、一度設定すれば再接続不要
- フェデレーションメンバー間でのシームレスな接続
- エンドツーエンドのセキュリティを確保

## ローミングの種類

### 内部ローミング
- 同一ネットワーク内でのAP間の移動
- 例：建物内での異なるアクセスポイント間の移動

### 外部ローミング
- 異なるネットワーク間での移動
- 例：異なる組織や地理的に離れた場所への移動

## セキュリティ考慮事項

### 1. エンドツーエンドセキュリティ
- ANP（Access Network Provider）とIDP（Identity Provider）間のRADIUSトラフィックの保護
- エンドユーザーデバイスとWLAN機器間のWi-Fiトラフィックの暗号化

### 2. レルムベースルーティング
- NAI（Network Access Identifier）形式：`user@realm`
- RFC 4282で標準化されたレルムフォーマット
- ドメイン名に類似した構造でルーティングを実現

### 3. プロキシチェーンのセキュリティ
- 異なる管理エンティティ間でのセキュアな通信
- 各ホップでの認証と暗号化

## 利点

1. **ユーザビリティの向上**
   - 一度の設定で複数のネットワークへの自動接続
   - 再認証の必要なし
   - 世界中でのシームレスな接続体験

2. **管理の効率化**
   - 集中化された認証管理
   - 組織間での相互運用性
   - スケーラブルなアーキテクチャ

3. **セキュリティの強化**
   - 強力な認証メカニズム
   - 暗号化された通信
   - 監査とアカウンティング機能

## 実装時の考慮事項

### 技術要件
- RADIUSサーバーの設置と設定
- 適切な認証方式の選択（EAP-TLS、PEAP、EAP-TTLSなど）
- ネットワークインフラストラクチャの対応

### 運用要件
- ポリシーの策定と管理
- ユーザーサポート体制
- 監視とトラブルシューティング

### 相互運用性
- 他組織との技術仕様の調整
- 信頼関係の確立
- サービスレベルアグリーメント（SLA）の締結

## まとめ

ローミングサーバーは、現代のモバイルおよびワイヤレスネットワーク環境において不可欠な要素です。RADIUSプロトコルを基盤として、セキュアで拡張可能な認証フェデレーションを実現し、ユーザーに透過的なネットワークアクセス体験を提供します。eduroamやOpenRoamingなどの実装例は、この技術が教育機関から商用ネットワークまで幅広く活用されていることを示しています。